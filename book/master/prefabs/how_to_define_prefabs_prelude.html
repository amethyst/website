<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>How to Define Prefabs: Prelude - Amethyst Documentation</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body class="light">
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { } 
            if (theme === null || theme === undefined) { theme = default_theme; }
            document.body.className = theme;
            document.querySelector('html').className = theme + ' js';
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <ol class="chapter"><li><a href="../intro.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li><a href="../getting-started.html"><strong aria-hidden="true">2.</strong> Getting Started</a></li><li><a href="../concepts/intro.html"><strong aria-hidden="true">3.</strong> Concepts</a></li><li><ol class="section"><li><a href="../concepts/state.html"><strong aria-hidden="true">3.1.</strong> State</a></li><li><a href="../concepts/entity_and_component.html"><strong aria-hidden="true">3.2.</strong> Entity and Component</a></li><li><a href="../concepts/resource.html"><strong aria-hidden="true">3.3.</strong> Resource</a></li><li><a href="../concepts/world.html"><strong aria-hidden="true">3.4.</strong> World</a></li><li><a href="../concepts/system.html"><strong aria-hidden="true">3.5.</strong> System</a></li><li><a href="../concepts/dispatcher.html"><strong aria-hidden="true">3.6.</strong> Dispatcher</a></li><li><a href="../concepts/event-channel.html"><strong aria-hidden="true">3.7.</strong> Event Channel</a></li></ol></li><li><a href="../pong-tutorial.html"><strong aria-hidden="true">4.</strong> Pong Tutorial</a></li><li><ol class="section"><li><a href="../pong-tutorial/pong-tutorial-01.html"><strong aria-hidden="true">4.1.</strong> Creating a Window</a></li><li><a href="../pong-tutorial/pong-tutorial-02.html"><strong aria-hidden="true">4.2.</strong> Drawing the Paddles</a></li><li><a href="../pong-tutorial/pong-tutorial-03.html"><strong aria-hidden="true">4.3.</strong> Moving the Paddles</a></li><li><a href="../pong-tutorial/pong-tutorial-04.html"><strong aria-hidden="true">4.4.</strong> Making a Ball Move and Bounce</a></li><li><a href="../pong-tutorial/pong-tutorial-05.html"><strong aria-hidden="true">4.5.</strong> Winning Rounds and Keeping Score</a></li><li><a href="../pong-tutorial/contribution.html"><strong aria-hidden="true">4.6.</strong> Call for Contribution</a></li></ol></li><li><a href="../math.html"><strong aria-hidden="true">5.</strong> Math</a></li><li><a href="../assets.html"><strong aria-hidden="true">6.</strong> Assets</a></li><li><ol class="section"><li><a href="../assets/formats.html"><strong aria-hidden="true">6.1.</strong> Formats</a></li><li><a href="../assets/how_to_use_assets.html"><strong aria-hidden="true">6.2.</strong> How to Use Assets</a></li><li><a href="../assets/how_to_define_custom_assets.html"><strong aria-hidden="true">6.3.</strong> How to Define Custom Assets</a></li><li><a href="../assets/how_to_define_custom_formats.html"><strong aria-hidden="true">6.4.</strong> How to Define Custom Formats</a></li></ol></li><li><a href="../prefabs.html"><strong aria-hidden="true">7.</strong> Prefabs</a></li><li><ol class="section"><li><a href="../prefabs/prefabs_in_amethyst.html"><strong aria-hidden="true">7.1.</strong> Prefabs in Amethyst</a></li><li><a href="../prefabs/how_to_define_prefabs_prelude.html" class="active"><strong aria-hidden="true">7.2.</strong> How to Define Prefabs: Prelude</a></li><li><a href="../prefabs/how_to_define_prefabs_simple.html"><strong aria-hidden="true">7.3.</strong> How to Define Prefabs: Simple</a></li><li><a href="../prefabs/how_to_define_prefabs_aggregate.html"><strong aria-hidden="true">7.4.</strong> How to Define Prefabs: Aggregate</a></li><li><a href="../prefabs/how_to_define_prefabs_adapter.html"><strong aria-hidden="true">7.5.</strong> How to Define Prefabs: Adapter</a></li><li><a href="../prefabs/how_to_define_prefabs_asset.html"><strong aria-hidden="true">7.6.</strong> How to Define Prefabs: Asset</a></li><li><a href="../prefabs/how_to_define_prefabs_multi_handle.html"><strong aria-hidden="true">7.7.</strong> How to Define Prefabs: Multi-Handle</a></li><li><a href="../prefabs/prefabs_technical_explanation.html"><strong aria-hidden="true">7.8.</strong> Prefabs Technical Explanation</a></li></ol></li><li><a href="../animation.html"><strong aria-hidden="true">8.</strong> Animation</a></li><li><ol class="section"><li><a href="../animation/interpolation.html"><strong aria-hidden="true">8.1.</strong> Interpolation</a></li><li><a href="../animation/channel.html"><strong aria-hidden="true">8.2.</strong> Channel</a></li><li><a href="../animation/sampler.html"><strong aria-hidden="true">8.3.</strong> Sampler</a></li><li><a href="../animation/definition.html"><strong aria-hidden="true">8.4.</strong> Definition</a></li></ol></li><li><a href="../controlling_system_execution.html"><strong aria-hidden="true">9.</strong> Controlling System Execution</a></li><li><ol class="section"><li><a href="../controlling_system_execution/custom_game_data.html"><strong aria-hidden="true">9.1.</strong> Custom GameData</a></li><li><a href="../controlling_system_execution/state-specific_dispatcher.html"><strong aria-hidden="true">9.2.</strong> State-specific Dispatcher</a></li><li><a href="../controlling_system_execution/pausable_systems.html"><strong aria-hidden="true">9.3.</strong> Pausable Systems</a></li></ol></li><li><a href="../sprites.html"><strong aria-hidden="true">10.</strong> Sprites</a></li><li><ol class="section"><li><a href="../sprites/set_up_the_render_pass.html"><strong aria-hidden="true">10.1.</strong> Set Up The Render Pass</a></li><li><a href="../sprites/load_the_texture.html"><strong aria-hidden="true">10.2.</strong> Load The Texture</a></li><li><a href="../sprites/display_the_texture.html"><strong aria-hidden="true">10.3.</strong> Display The Texture</a></li><li><a href="../sprites/define_the_sprite_sheet.html"><strong aria-hidden="true">10.4.</strong> Define The SpriteSheet</a></li><li><a href="../sprites/sprite_render_component.html"><strong aria-hidden="true">10.5.</strong> SpriteRender Component</a></li><li><a href="../sprites/orthographic_camera.html"><strong aria-hidden="true">10.6.</strong> Orthographic Camera</a></li></ol></li><li><a href="../testing.html"><strong aria-hidden="true">11.</strong> Testing</a></li><li><ol class="section"><li><a href="../testing/test_examples.html"><strong aria-hidden="true">11.1.</strong> Test Examples</a></li></ol></li><li><a href="../glossary.html"><strong aria-hidden="true">12.</strong> Glossary</a></li><li><a href="../appendices/a_config_files.html"><strong aria-hidden="true">13.</strong> Appendix A: Config Files</a></li><li><ol class="section"><li><a href="../appendices/a_config_files/arena_config.html"><strong aria-hidden="true">13.1.</strong> Adding an Arena Config</a></li><li><a href="../appendices/a_config_files/ball_config.html"><strong aria-hidden="true">13.2.</strong> Adding a Ball Config</a></li><li><a href="../appendices/a_config_files/paddle_configs.html"><strong aria-hidden="true">13.3.</strong> Adding Paddle Configs</a></li></ol></li><li><a href="../appendices/b_migration_notes.html"><strong aria-hidden="true">14.</strong> Appendix B: Migration Notes</a></li><li><ol class="section"><li><a href="../appendices/b_migration_notes/cgmath_to_nalgebra.html"><strong aria-hidden="true">14.1.</strong> cgmath to nalgebra</a></li><li><a href="../appendices/b_migration_notes/transform_api_changes.html"><strong aria-hidden="true">14.2.</strong> Transform API Changes</a></li></ol></li><li><a href="../appendices/c_feature_gates.html"><strong aria-hidden="true">15.</strong> Appendix C: Feature Gates</a></li></ol>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                            
                        </div>

                        <h1 class="menu-title">Amethyst Documentation</h1> 

                        <div class="right-buttons">
                            <a href="../print.html" title="Print this book" aria-label="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                            
                        </div>
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <a class="header" href="#how-to-define-prefabs-prelude" id="how-to-define-prefabs-prelude"><h1>How to Define Prefabs: Prelude</h1></a>
<p>This page is <strong>not</strong> a guide, but since prefabs are extremely complicated, this is a dedicated page to help you choose <em>which guide</em> to use.</p>
<p>If you are looking for a guide for how to define prefab data that combines the components of multiple existing prefabs, please see <a href="how_to_define_prefabs_aggregate.html">How to Define Prefabs: Aggregate</a>.</p>
<p>If you are looking for a guide to define prefab data for a <code>Component</code>, first we need to figure out its type based on its serialized representation. The following table summarizes the types, and links to the relevant guide. For additional detail, refer to the code snippets below the table.</p>
<table><thead><tr><th>Component     </th><th> Serialized representation             </th><th> Example(s)            </th><th> Prefab Data        </th><th> Guide</th></tr></thead><tbody>
<tr><td><code>YourType</code>    </td><td> <code>Self</code> – <code>YourType</code>             </td><td> <code>Position</code>            </td><td> <code>Position</code>         </td><td> <a href="how_to_define_prefabs_simple.html">Simple</a></td></tr>
<tr><td><code>YourType</code>    </td><td> Multiple – <code>V1(..)</code>, <code>V2(..)</code>   </td><td> <a href="https://docs-src.amethyst.rs/stable/amethyst_renderer/struct.Camera.html"><code>Camera</code></a>            </td><td> <a href="https://docs-src.amethyst.rs/stable/amethyst_renderer/enum.CameraPrefab.html"><code>CameraPrefab</code></a>   </td><td> <a href="how_to_define_prefabs_adapter.html">Adapter</a></td></tr>
<tr><td><code>YourType</code>    </td><td> Subset of <code>YourType</code>                  </td><td> <a href="https://docs-src.amethyst.rs/stable/amethyst_audio/struct.AudioListener.html"><code>AudioListener</code></a>     </td><td> <a href="https://docs-src.amethyst.rs/stable/amethyst_audio/struct.AudioPrefab.html"><code>AudioPrefab</code></a>    </td><td> <a href="how_to_define_prefabs_asset.html">Asset</a></td></tr>
<tr><td><code>Handle&lt;A&gt;</code>   </td><td> Loaded from <code>A::Data</code>                 </td><td> <a href="https://docs-src.amethyst.rs/stable/amethyst_renderer/struct.Mesh.html"><code>Mesh</code></a>, <a href="https://docs-src.amethyst.rs/stable/amethyst_renderer/struct.Texture.html"><code>Texture</code></a> </td><td> <a href="https://docs-src.amethyst.rs/stable/amethyst_renderer/enum.MeshData.html"><code>MeshData</code></a>, <a href="https://docs-src.amethyst.rs/stable/amethyst_renderer/enum.TexturePrefab.html"><code>TexturePrefab</code></a> </td><td> <a href="how_to_define_prefabs_asset.html">Asset</a></td></tr>
<tr><td><code>ManyHandles</code> </td><td> Data that component stores handles of </td><td> <a href="https://docs-src.amethyst.rs/stable/amethyst_renderer/struct.Material.html"><code>Material</code></a>          </td><td> <a href="https://docs-src.amethyst.rs/stable/amethyst_renderer/struct.MaterialPrefab.html"><code>MaterialPrefab</code></a> </td><td> <a href="how_to_define_prefabs_multi_handle.html">Multi-Handle</a></td></tr>
</tbody></table>
<a class="header" href="#serialized-representation" id="serialized-representation"><h3>Serialized Representation</h3></a>
<ul>
<li>
<p><strong><code>Self</code></strong></p>
<p>This is where the <code>Component</code> type itself is completely serializable – the data is self-contained.</p>
<pre><code class="language-rust edition2018 no_run noplaypen"># extern crate amethyst;
# extern crate serde;
# extern crate specs_derive;
#
# use amethyst::ecs::{storage::DenseVecStorage, Component};
# use serde::{Deserialize, Serialize};
# use specs_derive::Component;
#
#[derive(Component, Debug, Deserialize, Serialize /* .. */)]
pub struct Position(pub f32, pub f32, pub f32);
</code></pre>
<p>Applicable guide: <a href="how_to_define_prefabs_simple.html">How to Define Prefabs: Simple</a>.</p>
</li>
<li>
<p><strong>Multiple</strong></p>
<p>This is where are multiple ways to construct the component, and a user should be able to choose which one to use.</p>
<pre><code class="language-rust edition2018 no_run noplaypen"># extern crate amethyst;
# extern crate serde;
# extern crate specs_derive;
#
# use amethyst::ecs::{storage::DenseVecStorage, Component};
# use serde::{Deserialize, Serialize};
# use specs_derive::Component;
#
# #[derive(Component, Debug, Deserialize, Serialize /* .. */)]
# pub struct Position {
#     pub x: f32,
#     pub y: f32,
#     pub z: f32,
# };
#
impl From&lt;(i32, i32, i32)&gt; for Position {
    fn from((x, y, z): (i32, i32, i32)) -&gt; Position {
        Position {
            x: x as f32,
            y: y as f32,
            z: z as f32,
        }
    }
}

impl From&lt;(f32, f32, f32)&gt; for Position {
    fn from((x, y, z): (f32, f32, f32)) -&gt; Position {
        Position { x, y, z }
    }
}
</code></pre>
<p>Applicable guide: <a href="how_to_define_prefabs_adapter.html">How to Define Prefabs: Adapter</a>.</p>
</li>
<li>
<p><strong>Component Subset</strong></p>
<p>This is where most of the component is serializable, but there is also data that is only accessible at runtime, such as a device ID or an asset handle.</p>
<pre><code class="language-rust edition2018 no_run noplaypen"># extern crate amethyst_audio;
# extern crate amethyst_core;
# extern crate specs_derive;
#
# use amethyst_audio::output::Output;
# use amethyst_core::{
#     math::Point3,
#     ecs::{prelude::Component, storage::HashMapStorage},
# };
# use specs_derive::Component;
#
#[derive(Debug, Component)]
# #[storage(HashMapStorage)]
pub struct AudioListener {
    /// Output used by this listener to emit sounds to
    pub output: Output, // &lt;--- NOTE: Only available at runtime
    // ..
#     /// Position of the left ear relative to the global transform on this entity.
#     pub left_ear: Point3&lt;f32&gt;,
#     /// Position of the right ear relative to the global transform on this entity.
#     pub right_ear: Point3&lt;f32&gt;,
}
</code></pre>
<p>Applicable guide: <a href="how_to_define_prefabs_asset.html">How to Define Prefabs: Asset</a>.</p>
</li>
<li>
<p><strong>Asset</strong></p>
<p>When using <code>Handle&lt;A&gt;</code> as a component, <code>A</code> must <code>impl Asset</code>, and therefore <code>A::Data</code> must be serializable.</p>
<p>This is where you want to load <code>A</code> as part of a prefab.</p>
<p>Applicable guide: <a href="how_to_define_prefabs_asset.html">How to Define Prefabs: Asset</a>.</p>
</li>
<li>
<p><strong>Multi-Handle</strong></p>
<p>This is where the <code>Component</code> itself stores <code>Handle&lt;_&gt;</code>s.</p>
<pre><code class="language-rust edition2018 no_run noplaypen"># extern crate amethyst;
#
# use amethyst::{
#     assets::Handle,
#     ecs::{storage::DenseVecStorage, Component},
#     renderer::Texture,
# };
#
/// Material struct.
#[derive(Clone, PartialEq)]
pub struct Material {
    /// Diffuse map.
    pub albedo: Handle&lt;Texture&gt;,
    /// Emission map.
    pub emission: Handle&lt;Texture&gt;,
    // ..
}

impl Component for Material {
    type Storage = DenseVecStorage&lt;Self&gt;;
}
</code></pre>
<p>Applicable guide: <a href="how_to_define_prefabs_multi_handle.html">How to Define Prefabs: Multi-Handle</a>.</p>
</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../prefabs/prefabs_in_amethyst.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../prefabs/how_to_define_prefabs_simple.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a href="../prefabs/prefabs_in_amethyst.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a href="../prefabs/how_to_define_prefabs_simple.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
